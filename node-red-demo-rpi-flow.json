[{"id":"97094dbc.68f6b","type":"function","name":"Motion Dectction","func":"\nvar pin = 4;\nvar mqtt = {};\n\nmqtt.topic = 'edtiot/motion';\n\n// initialise the wpi to use the global context\nvar wpi = context.global.wpi;\n\n// use the default WiringPi pin number scheme...\nwpi.wiringPiSetup();\n\n// initialise the state of the pin if not already set\n// anything in context.  persists from one call to the function to the next\ncontext.state = context.state || wpi.LOW;\n\n//Set the pin 4 as input\nwpi.pinMode(pin, wpi.INPUT);\n\n//Read the pin status\nvar motion = wpi.digitalRead(pin);\n\nif(motion){\n    node.log('Motion detected');\n    mqtt.payload = 'Intruder Detected';\n    return mqtt;\n}\n\n","outputs":1,"noerr":0,"x":514,"y":244,"z":"b60ab338.49f55","wires":[["83ab3950.7c54c8","70230ad1.8fdcf4"]]}]